@import 'tailwindcss';
@plugin "@tailwindcss/forms";
@plugin "@tailwindcss/typography";

/* Enable class-based dark mode (matches html.dark selector) */
@custom-variant dark (&:where(.dark, .dark *));

/* Prevent horizontal overflow on mobile and optimize touch scrolling */
html,
body {
  overflow-x: hidden;
  max-width: 100vw;
  touch-action: pan-y pinch-zoom; /* Allow vertical scrolling and pinch zoom, prevent horizontal on body */
  -webkit-overflow-scrolling: touch;
}

/* Safe area insets for Android/iOS edge-to-edge displays */
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
}

.page-loader {
  min-height: 100vh;
}

@media (max-width: 1023px) {
  .page-loader {
    min-height: calc(100svh - 10rem);
  }
}

* {
  box-sizing: border-box;
}

@font-face {
  font-family: 'Geist';
  src: url('/GeistVariableVF.ttf') format('truetype');
  font-style: normal;
  font-weight: 100 900;
  font-stretch: 0% 200%;
  font-display: auto;
}

/* Define CSS custom properties for theme colors */
:root {
  --color-primary: #ec4700;
  --color-input-bg: #f3f4f6;
  --color-input-border: #e5e7eb;
  --color-accent-gray: #d1d5db;
  --color-caption: #6b7280;
  --color-danger: #dc2626;
  --color-text-primary: #111827;
  --color-text-secondary: #4b5563;
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f9fafb;
  --color-skeleton-base: #e5e7eb;
  --color-skeleton-highlight: #f3f4f6;

  /* Bitcoin Connect theming */
  --bc-color-brand: #ec4700;
  --bc-color-brand-dark: #ff5722;
  --bc-brand-mix: 100%;
  --bc-color-brand-button-text: #ffffff;
  --bc-color-brand-button-text-dark: #ffffff;
}

html.dark {
  --color-primary: #ff5722;
  --color-input-bg: #374151;
  --color-input-border: #4b5563;
  --color-accent-gray: #4b5563;
  --color-caption: #9ca3af;
  --color-danger: #ef4444;
  --color-text-primary: #f3f4f6;
  --color-text-secondary: #d1d5db;
  --color-bg-primary: #111827;
  --color-bg-secondary: #1f2937;
  --color-skeleton-base: #1f2937;
  --color-skeleton-highlight: #374151;
}

/* Base document styling */
html {
  background-color: var(--color-bg-primary);
  color: var(--color-text-primary);
}

@theme {
  --font-display: 'Geist', sans;
  --breakpoint-print: print;

  /* Define colors for Tailwind utility classes */
  --color-primary: #ec4700;
  --color-danger: #dc2626;
}

/* Input styling with proper light/dark support */
.input {
  @apply rounded-xl p-3 transition duration-300;
  background-color: var(--color-input-bg);
  border-color: var(--color-input-border);
  color: var(--color-text-primary);
}

.input:focus {
  --tw-ring-color: #ec4700;
  border-color: #ec4700;
}

/* Typography */
h1 {
  @apply text-2xl md:text-3xl font-semibold tracking-tight;
  color: var(--color-text-primary);
}
h2 {
  @apply text-xl md:text-2xl font-semibold tracking-tight;
  color: var(--color-text-primary);
}
h3 {
  @apply text-lg md:text-xl font-semibold tracking-tight;
  color: var(--color-text-primary);
}

/* Utility classes for theme-aware colors */
.bg-input {
  background-color: var(--color-input-bg) !important;
}

.bg-accent-gray {
  background-color: var(--color-accent-gray) !important;
}

.nav-active {
  background-color: var(--color-input-bg);
}

.nav-hover:hover {
  background-color: color-mix(in srgb, var(--color-input-bg) 70%, transparent);
}

.text-caption {
  color: var(--color-caption) !important;
}

.text-danger {
  color: var(--color-danger) !important;
}

.text-primary-color {
  color: var(--color-text-primary) !important;
}

.border-input {
  border-color: var(--color-input-border) !important;
}

.skeleton-bg {
  background-color: var(--color-skeleton-base) !important;
}

.image-placeholder {
  background: linear-gradient(
    135deg,
    var(--color-skeleton-base) 0%,
    var(--color-skeleton-highlight) 100%
  );
  position: relative;
}

.image-placeholder::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 64px;
  height: 64px;
  opacity: 0.5;
  background-image: url("data:image/svg+xml,%3Csvg width='132' height='133' viewBox='0 0 132 133' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M57.8158 99.6294C65.8289 99.6294 73.3158 97.375 79.6754 93.4671C85.0833 90.1447 88.1952 92.875 90.5439 95.6031L106.546 114.189C108.331 116.261 111.5 116.379 113.434 114.445L114.45 113.43C116.384 111.496 116.265 108.327 114.193 106.542L95.6075 90.5395C92.8794 88.1908 90.1469 85.079 93.4715 79.6711C97.3794 73.3114 99.6338 65.8246 99.6338 57.8114C99.6338 49.7982 97.3838 42.3268 93.4825 35.9693C92.8202 34.8925 92.6118 33.6053 92.5658 32.3421C92.4847 30.0746 91.5175 27.7522 89.6974 25.9298C87.8772 24.1096 85.5526 23.1425 83.2873 23.0614C82.0241 23.0154 80.739 22.807 79.6601 22.1447C73.2982 18.25 65.8202 16 57.8158 16C46.2697 16 35.8158 20.6798 28.2478 28.2478C20.6798 35.8136 16 46.2675 16 57.8158C16 65.8202 18.25 73.3004 22.1513 79.6557C22.8136 80.7347 23.0219 82.0197 23.068 83.2829C23.1491 85.5504 24.1162 87.8728 25.9364 89.6952C27.7566 91.5154 30.0811 92.4825 32.3487 92.5636C33.6118 92.6097 34.8969 92.818 35.9759 93.4803C42.3333 97.3816 49.8114 99.6316 57.8158 99.6316V99.6294Z' fill='%239ca3af'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M103.495 103.496C103.088 103.903 103.05 104.555 103.412 105.004L108.083 110.838C108.813 111.75 110.173 111.825 111 110.998C111.827 110.171 111.75 108.811 110.84 108.081L105.006 103.41C104.555 103.048 103.906 103.085 103.498 103.493L103.495 103.496ZM82.2959 82.296C68.7761 95.8157 46.8551 95.8157 33.3332 82.296C19.8134 68.7763 19.8134 46.8552 33.3332 33.3333C46.8529 19.8135 68.774 19.8135 82.2959 33.3333C95.8156 46.853 95.8156 68.7741 82.2959 82.296Z' fill='%23d1d5db'/%3E%3Cpath d='M86.6467 57.8158C86.6467 73.7391 73.7388 86.647 57.8155 86.647C41.8923 86.647 28.9844 73.7391 28.9844 57.8158C28.9844 41.8926 41.8923 28.9847 57.8155 28.9847C73.7388 28.9847 86.6467 41.8926 86.6467 57.8158Z' fill='%23b0b0b0'/%3E%3Cpath d='M72.243 52.671C72.0171 52.193 71.55 51.8969 71.0215 51.8969H61.8307L61.7868 51.8399L65.3504 38.1294C65.5127 37.5 65.2342 36.8794 64.6553 36.5855C64.0763 36.2916 63.4118 36.4298 62.9996 36.932L43.618 60.5526C43.2825 60.9605 43.2145 61.5109 43.4403 61.9868C43.6662 62.4649 44.1333 62.7609 44.6618 62.7609H53.8526L53.8965 62.818L50.3329 76.5285C50.1706 77.1579 50.4491 77.7785 51.0281 78.0723C51.2298 78.1754 51.4425 78.2259 51.6509 78.2259C52.039 78.2259 52.4162 78.0526 52.6838 77.7259L72.0653 54.1052C72.4009 53.6973 72.4689 53.1469 72.243 52.671Z' fill='%23e5e7eb'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
}

html.dark .image-placeholder::before {
  background-image: url("data:image/svg+xml,%3Csvg width='132' height='133' viewBox='0 0 132 133' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M57.8158 99.6294C65.8289 99.6294 73.3158 97.375 79.6754 93.4671C85.0833 90.1447 88.1952 92.875 90.5439 95.6031L106.546 114.189C108.331 116.261 111.5 116.379 113.434 114.445L114.45 113.43C116.384 111.496 116.265 108.327 114.193 106.542L95.6075 90.5395C92.8794 88.1908 90.1469 85.079 93.4715 79.6711C97.3794 73.3114 99.6338 65.8246 99.6338 57.8114C99.6338 49.7982 97.3838 42.3268 93.4825 35.9693C92.8202 34.8925 92.6118 33.6053 92.5658 32.3421C92.4847 30.0746 91.5175 27.7522 89.6974 25.9298C87.8772 24.1096 85.5526 23.1425 83.2873 23.0614C82.0241 23.0154 80.739 22.807 79.6601 22.1447C73.2982 18.25 65.8202 16 57.8158 16C46.2697 16 35.8158 20.6798 28.2478 28.2478C20.6798 35.8136 16 46.2675 16 57.8158C16 65.8202 18.25 73.3004 22.1513 79.6557C22.8136 80.7347 23.0219 82.0197 23.068 83.2829C23.1491 85.5504 24.1162 87.8728 25.9364 89.6952C27.7566 91.5154 30.0811 92.4825 32.3487 92.5636C33.6118 92.6097 34.8969 92.818 35.9759 93.4803C42.3333 97.3816 49.8114 99.6316 57.8158 99.6316V99.6294Z' fill='%234b5563'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M103.495 103.496C103.088 103.903 103.05 104.555 103.412 105.004L108.083 110.838C108.813 111.75 110.173 111.825 111 110.998C111.827 110.171 111.75 108.811 110.84 108.081L105.006 103.41C104.555 103.048 103.906 103.085 103.498 103.493L103.495 103.496ZM82.2959 82.296C68.7761 95.8157 46.8551 95.8157 33.3332 82.296C19.8134 68.7763 19.8134 46.8552 33.3332 33.3333C46.8529 19.8135 68.774 19.8135 82.2959 33.3333C95.8156 46.853 95.8156 68.7741 82.2959 82.296Z' fill='%236b7280'/%3E%3Cpath d='M86.6467 57.8158C86.6467 73.7391 73.7388 86.647 57.8155 86.647C41.8923 86.647 28.9844 73.7391 28.9844 57.8158C28.9844 41.8926 41.8923 28.9847 57.8155 28.9847C73.7388 28.9847 86.6467 41.8926 86.6467 57.8158Z' fill='%23555555'/%3E%3Cpath d='M72.243 52.671C72.0171 52.193 71.55 51.8969 71.0215 51.8969H61.8307L61.7868 51.8399L65.3504 38.1294C65.5127 37.5 65.2342 36.8794 64.6553 36.5855C64.0763 36.2916 63.4118 36.4298 62.9996 36.932L43.618 60.5526C43.2825 60.9605 43.2145 61.5109 43.4403 61.9868C43.6662 62.4649 44.1333 62.7609 44.6618 62.7609H53.8526L53.8965 62.818L50.3329 76.5285C50.1706 77.1579 50.4491 77.7785 51.0281 78.0723C51.2298 78.1754 51.4425 78.2259 51.6509 78.2259C52.039 78.2259 52.4162 78.0526 52.6838 77.7259L72.0653 54.1052C72.4009 53.6973 72.4689 53.1469 72.243 52.671Z' fill='%239ca3af'/%3E%3C/svg%3E");
}

/* QR code - always black on white regardless of theme */
.qr-wrapper,
.qr-wrapper * {
  background-color: #ffffff !important;
  color: #000000 !important;
  fill: #000000 !important;
}

/* Utility class to hide scrollbars while maintaining scroll functionality */
.scrollbar-hide {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Chrome/Safari/Opera */
}

/* Touch-action utilities for horizontal carousels */
/* Allow both vertical (page scroll) and horizontal (carousel) scrolling */
/* Browser detects gesture direction from initial touch movement */
.touch-pan-x {
  touch-action: pan-y pan-x !important;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
}

/* Prevent images from being draggable */
.no-drag {
  -webkit-user-drag: none;
  user-drag: none;
  -webkit-touch-callout: none;
}
